# 2D Raycaster: Симуляция Света и Тени

Это приложение на C++ и Qt, демонстрирующее 2D-трассировку лучей для создания эффектов освещения и теней в реальном времени. Пользователи могут рисовать полигоны, которые выступают в качестве препятствий, и размещать источники света, чтобы наблюдать за формированием теней.

![Демонстрация 2D Raycaster](demo.gif)

## Ключевые возможности

*   **Динамическое создание полигонов**:
    *   **Левый клик**: Начать новый полигон или добавить вершину к текущему.
    *   **Правый клик**: Завершить текущий полигон.
*   **Интерактивный источник света**:
    *   В режиме "Light" перемещайте мышь, чтобы изменять положение основного источника света.
*   **Мягкие тени (Penumbra)**: Вокруг основного источника света создается несколько дополнительных источников для имитации эффекта полутени.
*   **Рендеринг в реальном времени**: Тени и освещение пересчитываются и отображаются динамически при изменении полигонов или положения источника света.
*   **Переключение режимов**: Легко переключайтесь между режимом "Polygons" (для рисования фигур) и "Light" (для управления светом) с помощью выпадающего списка.
*   **Автоматические границы**: Края холста выступают в роли невидимого полигона, ограничивающего распространение света.
*   **Темная тема**: Приложение использует приятную темную палитру для интерфейса.

## Технологический стек

*   **C++17** (или выше)
*   **Qt 6** (Widgets, Gui, Core)
*   **CMake** (для сборки проекта)

## Системные требования

*   Компилятор C++, поддерживающий C++17 (GCC, Clang, MSVC и т.д.)
*   Qt 6 SDK
*   CMake (версия 3.16 или выше)

## Сборка проекта

1.  **Клонируйте репозиторий:**
    ```bash
    git clone https://github.com/daniladikan2000/2D_Raycaster.git
    cd 2D_Raycaster
    ```

2.  **Создайте директорию для сборки:**
    ```bash
    mkdir build
    cd build
    ```

3.  **Сконфигурируйте проект с помощью CMake:**
    *   Если Qt установлен в стандартные пути:
        ```bash
        cmake ..
        ```
    *   Если Qt установлен в нестандартное место, укажите путь к нему (замените `<путь_к_Qt>`):
        ```bash
        cmake -DCMAKE_PREFIX_PATH=<путь_к_Qt>/<версия_Qt>/<платформа> ..
        # Пример для Linux: cmake -DCMAKE_PREFIX_PATH=~/Qt/6.5.0/gcc_64 ..
        # Пример для Windows (MSVC): cmake -DCMAKE_PREFIX_PATH=C:/Qt/6.5.0/msvc2019_64 .. -G "Visual Studio 17 2022"
        ```

4.  **Соберите проект:**
    *   Linux/macOS:
        ```bash
        make -j$(nproc) # или просто make
        ```
    *   Windows (если используется MinGW):
        ```bash
        mingw32-make
        ```
    *   Windows (если используется генератор Visual Studio):
        ```bash
        cmake --build . --config Release
        ```

5.  **Запуск:**
    Исполняемый файл (например, `2D_Raycaster` или `2D_Raycaster.exe`) будет находиться в директории `build`.

## Как использовать

1.  Запустите приложение.
2.  Используйте выпадающий список в верхней части окна для выбора режима:
    *   **"Polygons" (Полигоны):**
        *   **Левый клик мыши** на холсте: Начать рисование нового полигона или добавить вершину к текущему.
        *   Перемещайте мышь, чтобы видеть предварительный просмотр следующего сегмента.
        *   **Правый клик мыши**: Завершить рисование текущего полигона.
    *   **"Light" (Свет):**
        *   **Кликните или перетаскивайте мышь** на холсте, чтобы установить положение основного источника света. Дополнительные источники света будут автоматически расположены вокруг него.
        *   Тени будут динамически отбрасываться от нарисованных полигонов.

## Структура проекта

*   `main.cpp`: Точка входа приложения, настройка темной темы Qt.
*   `MainWindow.h` / `MainWindow.cpp`: Главное окно приложения. Содержит выпадающий список для выбора режима и виджет `Canvas`.
*   `Canvas.h` / `Canvas.cpp`: Основной виджет для рисования. Обрабатывает события мыши, управляет режимами, содержит экземпляры `Controller` и отрисовывает полигоны, источники света и световые эффекты.
*   `Controller.h` / `Controller.cpp`: Класс, управляющий логикой. Хранит полигоны, положение источника света, цвет и реализует алгоритмы трассировки лучей, поиска пересечений и создания области освещения.
*   `Polygon.h` / `Polygon.cpp`: Представление полигона (набор вершин). Содержит методы для добавления/обновления вершин и поиска пересечения с лучом.
*   `Ray.h` / `Ray.cpp`: Представление луча (начальная точка, конечная точка, угол). Включает метод для поворота луча.
*   `CMakeLists.txt`: Скрипт для сборки проекта с помощью CMake.
